<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv = "Content-Type" content = "text/html; charset=UTF-8">
		<title> {{ productname }} </title>
		<link rel = "stylesheet" href = "css/format.css" type = "text/css">
		<style>
			thead tr > td {
				font-size:1.5em;
			}
			td {
				border-width:0px 1px 1px 0px;
				border-style:solid;
				font-size:1.2em;
			}
			table#listcal {
				border-width:1px 0px 0px 1px;
				border-style:solid;
				border-color:black;
				text-align:center;
			}
			tr.event > td {
				padding:20px;
			}
			td {
				height:20px;
			}
			td.date {
				min-width:25px;
				width:100px;
			}
			td.week {
				width:80px;
			}
			td.time {
				width:150px;
			}
			div#unmatchedmessage {
				text-align:center;
				font-size:2em;
				display:none;
			}
		</style>
		<script type = "text/javascript">
			function google_logout () {
				window.location = "{{ logouturl }}";				
			}
		</script>
		<script type = "text/javascript">
			function pushevent () {//將活動放入行事曆中
				var eventbody = document.getElementById ("eventbody");
				var dataclass = ["date", "week", "time", "content"];
				var Event, data;
				for (var i = 0 ; i < 10 ; i++) {
					Event = document.createElement ("tr");
					Event.id = "event" + (i + 1);//建立每一個活動的id
					Event.className = "event";
					for (var j = 0 ; j < 4 ; j++) {
						data = document.createElement ("td");
						data.id = Event.id + dataclass[j];//建立每一個欄位的id	format = event<i><className>
						data.className = dataclass[j];
						Event.appendChild (data);
					}
					eventbody.appendChild (Event);
				}
			}
			function searchevent () {//搜尋符合的活動
				var string = document.getElementById ("searchingstring").value;
				var events = document.getElementById ("eventbody").getElementsByClassName ("event");
				var eventscontent = document.getElementById ("eventbody").getElementsByClassName ("content");
				var matchedNum = 0;
				for (var i = 0 ; i < eventscontent.length ; i++) {
					if (eventscontent[i].innerHTML.search (string) == -1) {//Not Match
						events[i].style.display = "none";
					}
					else {
						events[i].style.display = "table-row";
						matchedNum++;
					}
				}
				if (matchedNum == 0) {
					document.getElementById ("unmatchedmessage").style.display = "block";
				}
				else {
					document.getElementById ("unmatchedmessage").style.display = "none";
				}
			}
		</script>
		<!--<script src = "testdataforlist.js" type = "text/javascript"></script><!-- testdata -->
		<script>
			function pushtestdata () {//push test data
			document.getElementById ("event1date").innerHTML = "2012.11.28";
			document.getElementById ("event1week").innerHTML = "星期三";
			document.getElementById ("event1time").innerHTML = "20:30 - 22:00";
			document.getElementById ("event1content").innerHTML = "期末Project Online";
			document.getElementById ("event2date").innerHTML = "2012.12.21";
			document.getElementById ("event2week").innerHTML = "星期五";
			document.getElementById ("event2time").innerHTML = "?:?? - ?:??";
			document.getElementById ("event2content").innerHTML = "世界末日";
			document.getElementById ("event3date").innerHTML = "2013.6.20";
			document.getElementById ("event3week").innerHTML = "星期四";
			document.getElementById ("event3time").innerHTML = "0:00 - 24:00";
			document.getElementById ("event3content").innerHTML = "生日大會";
			}
		</script>
	</head>
	<body onload = "pushevent (); pushtestdata ();">
		<div id = "topprodname">
			{{ googleuser }} - {{ productname }}
		</div>
		<div id = "controlpanel">
			<div id = "controlleft">
				<input type = "button" value = "月曆" id = "switchmonth">
				<input type = "button" value = "清單" id = "switchlist" class = "selected">
			</div>
			<div id = "controlright">
				<input type = "button" value = "匯入" id = "buttonimport">
				<input type = "button" value = "匯出" id = "buttonexport">
				<input type = "button" value = "登出" onclick = "google_logout()" style = "background-color:darkgray;">
			</div>
		</div>
		<div id = "statusbar">
			載入中......
		</div>
		<div id = "searchbar" align = "center">
			<input id = "searchingstring" type = "text" onkeyup = "searchevent ();">
		</div>
		<div align = "center">
			<table id = "listcal" cellpadding = "0" cellspacing = "0" style = "width:1880px;">
				<thead>
					<tr>
						<td colspan = "3" id = "date"> 日期 </td>
						<td id = "eventcontent" style = "width:1418px;"> 內容 </td>
					</tr>
				</thead>
				<tbody id = "eventbody">
				</tbody>
			</table>
		</div>
		<div id = "unmatchedmessage">
			找不到匹配項
		</div>
	</body>
</html>