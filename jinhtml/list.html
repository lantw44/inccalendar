{% extends "jinhtml/skel.html" %}
{% block headcss %}
	<link rel = "stylesheet" type = "text/css" href = "/css/list.css">
	<style>
		.event {
			cursor:pointer;
		}
	</style>
{% endblock %}

{% block onload %}
	pushevent (); 
	pushtestdata ();
	var switchlistobj = document.getElementById("switchlist")
	switchlistobj.className += "selected";
	switchlistobj.onclick = "";
{% endblock %}

{% block headjs %}
	<script src = "/js/list.js" type = "text/javascript"></script>
	<script>
		function pushtestdata () {//push test data
			var classname = ["date", "week", "time", "title", "content"];
			var testevents = new Array ();
			var eventid;
			testevents.push ("2012.11.28", "星期三", "20:30 - 22:00", "期末Project Online", "Come On!!");
			testevents.push ("2012.12.1", "星期六", "8:30 - 11:30", "校園馬拉松", "I'm so tired.");
			testevents.push ("2012.12.21", "星期五", "?:?? - ?:??", "世界末日", "NO!!!!!!");
			testevents.push ("2013.1.7", "星期一", "0:00 - ", "期末考Online", "GOD!!!");
			testevents.push ("2013.6.20", "星期四", "0:00 - 24:00", "生日大會", "Happy Birthday!!");
			for (var i = 0 ; i < testevents.length ; i++) {
				eventid = "event" + Math.floor (i / 5 + 1) + classname[i % 5];
				$ ("#" + eventid).text (testevents[i]);
			}
		}
		function pushdata () {
			var postdata = new Array ();
			var datastring;
			postdata.push ("title", "123");
			postdata.push ("content", "eventcontent");
			postdata.push ("icon", "5");
			postdata.push ("year", "2012");
			postdata.push ("month", "12");
			postdata.push ("date", "16");
			postdata.push ("hour", "10");
			postdata.push ("minute", "10");
			postdata.push ("datafrom", "google");
			postdata.push ("remind", "77");
			datastring = postdata[0] + "=" + postdata[1];
			for (var i = 2 ; i < postdata.length ; i += 2) {
				datastring += "&" + postdata[i] + "=" + postdata[i + 1];
			}
			$.ajax ({
				type: "POST",
				url: "/access/insert",
				data: datastring,
				success: function () {
					alert ("POST SUCCESS!!");
				}
			});
		}
	</script>
{% endblock %}

{% block body %}
	<div id = "searchbar" align = "center">
		<select id = "searchingoption" onchange = "changesearchingbar (this);">
			<option value = "date"> 日期 </option>
			<option value = "content" selected = "selected"> 標題 </option>
		</select>
		<input id = "searchingcontent" type = "text" onkeyup = "searchevent ();">
		<div id = "searchingdate" style = "display:none;">
			<input id = "searchingdatemonth" type = "text" size = "2" onkeyup = "searchevent ();"> 月
			<input id = "searchingdateday" type = "text" size = "2" onkeyup = "searchevent ();"> 日
		</div>
	</div>
	<div align = "center">
		<table id = "listcal" cellpadding = "0" cellspacing = "0" style = "width:100%;">
			<thead>
				<tr>
					<td colspan = "3" id = "date"> 日期 </td>
					<td id = "eventcontent"> 標題 </td>
				</tr>
			</thead>
			<tbody id = "eventbody">
			</tbody>
		</table>
	</div>
	<div id = "unmatchedmessage">
		找不到活動
	</div>
	<button type = "button" onclick = "pushdata ();"> Click Me !! </button>
{% endblock %}
